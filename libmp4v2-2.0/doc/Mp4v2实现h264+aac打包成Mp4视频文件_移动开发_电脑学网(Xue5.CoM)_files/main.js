/*pub-1|2013-12-10 11:04:15*/KSLITE.declare("tkapi-main",["tkapi-bindclick","tkapi-load","tkapi-boot","tkapi-config","tkapi-plugin","tkapi-monitor"],function(b,d){var c=KSLITE;var g=b("tkapi-bindclick").Def;var h=b("tkapi-load").Def;var a=b("tkapi-boot").Def;var e=b("tkapi-plugin").Def;var i=b("tkapi-monitor");var f=b("tkapi-config");d.run=function(j){f.ready(function(){f.createFixed(j);g();h();setTimeout(function(){a();e(j.plugins)},200);if(j.hasOwnProperty("monitor")){if(c.iF(j.monitor)){i.observe(j.monitor)}else{window.console&&console.warn("\u6307\u5b9a\u7684monitor\u53c2\u6570\u4e0d\u662f\u4e00\u4e2afunction")}}})}});KSLITE.declare("tkapi-monitor",[],function(b,a){var c=KSLITE;var e=[];a.log=function(){};var d=function(h){h.time=new Date();for(var f=0;f<e.length;f++){try{e[f](h)}catch(g){}}};a.observe=function(f){if(!c.iF(f)){return false}if(e.length==0){a.log=d}e.push(f)}});KSLITE.declare("tkapi-config",["tkapi-util"],function(b,f){var e=KSLITE;var a={},d={};var h=b("tkapi-util");var g=false;a.ali=["taobao.com","alimama.com","alibaba.com","alipay.com","alisoft.com","linezing.com","tanx.com","mmstat.com","etao.com","tmall.com"];a.kws=["wd","p","q","keyword","kw","w","key","word","query","name"];a.alimama="http://g.click.taobao.com/";a.cookieKey="amvid";a.linkAttr=["data-itemid","data-sellerid","data-keyword","data-unid","data-pid","data-other","data-rd","_tkworked"];a.para=["appkey","unid","pid","evid"];a.queryOrder=["ak","pid","unid","eid","wt","wi","ti","tl","rd","ct","st","rf","et","mb","pgid","other","v","tc"];a.oldAttr=["&","itemid","sellerid","keyword","bucketid","count","cid"].join("&");a.cc=function(k){var o=document;var q=window;var l=100;var n=k;var r;try{if(h.cssSupports("opacity")){while(n&&n.tagName){try{r=(q.getComputedStyle(n,null).opacity||1)*100}catch(p){}l=l*(r/100);n=n.parentNode}}if(navigator.userAgent.toLowerCase().indexOf("msie")>-1){while(n&&n.tagName){r=100;try{r=n.filters.alpha.opacity||100}catch(p){}l=l>r?r:l;n=n.parentNode}}}catch(m){}return{PW:o.documentElement.clientWidth||o.body.clientWidth,PH:o.documentElement.clientHeight||o.body.clientHeight,OP:l||100,IF:(q!=window.top&&q!=q.parent)-0}};d.cache=undefined;d.win=window;d.d=document;d.maxwin=null;d._maxwin=function(k){if(k){d.maxwin=k;return}k=d.win;if(top!=k){if(top.location&&top.location.href){k=top}}d.maxwin=k};d.ali=(function(){var l,m=d.d.domain.split("."),n=a.ali,k;if(m.length>1){k="@"+m[m.length-2]+"."+m[m.length-1];if(("@"+n.join("@")).indexOf(k)>-1){return true}}return false})();d.frm=(function(){return(top!=window)})();d.ref_url=null;d.getRef_url=function(){if(d.ref_url){return d.ref_url}var k=location.href;if(d.frm){if(d.win==d.maxwin){k=d.d.referrer}else{k=top.location.href}}d.ref_url=k;return k};f.queryData=function(l,r){r=r||{};var p=l.data,m;var n={};for(m in p){if(p.hasOwnProperty(m)&&a.oldAttr.indexOf("&"+m)>0){l.biz[m]=p[m];try{delete p[m]}catch(q){p[m]=undefined}}else{n[m]=p[m]}}var o=d.cache;n.pid=p.pid||o.pid;n.rd=p.rd||o.rd;n.pgid=o.pgid;n.rf=o.ref;n.et=o.et||o.clicktime.et();n.v=r.v||"2.0";if(!p.unid&&o.unid){n.unid=o.unid}if(o.ak){n.ak=o.ak}if(o.evid){n.eid=o.evid}n.ct=l.data.ct=h.buildQuery(l.biz);return n};f.getConfig=function(k){return d.cache[k]||null};var c={};var j={};c.getPageUrl=function(){return h.encode(d.getRef_url())};c.getCbhAndCbw=function(){var l,k=1,m=-1;l=d.maxwin.document;k=l.documentElement.clientHeight||l.body.clientHeight;m=l.documentElement.clientWidth||l.body.clientWidth;return"cbh="+k+"&cbw="+m};c.getScreenInfo=function(){var m=d.maxwin.screen,k=0,q=0,l=0,o=0,p=0;try{k=m.width;q=m.height;l=m.availHeight;o=m.availWidth;p=m.colorDepth}catch(n){KSLITE.log(n)}return"re="+k+"x"+q+"&cah="+l+"&caw="+o+"&ccd="+p};c.getFlashVersion=function(){var k="-1",p=navigator,m,l;if(p.plugins&&p.plugins.length){for(m=0;m<p.plugins.length;m++){if(p.plugins[m].name.indexOf("Shockwave Flash")!=-1){k=p.plugins[m].description.split("Shockwave Flash ")[1];break}}}else{if(window.ActiveXObject){for(l=10;l>=2;l--){try{var n=new Function("return new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+l+"');");if(n){k=l+".0";break}}catch(o){KSLITE.log(o)}}}}if(k!="-1"){k=k.substring(0,k.indexOf(".")+2)}return"cf="+k};c.getBrowserInfo=function(){var k=[],l=navigator;k.push("ctz="+(-((new Date()).getTimezoneOffset()/60)));k.push("chl="+history.length);k.push("cja="+(l.javaEnabled()?"1":"0"));k.push("cpl="+(l.plugins?l.plugins.length:0));k.push("cmm="+(l.mimeTypes?l.mimeTypes.length:0));k.push(c.getFlashVersion());return k.join("&")};c.pageid=function(){var l="",k="",n,o,t,u,s=location,m="",q=Math;function r(x,z){var y="",v=1,w;v=Math.floor(x.length/z);if(v==1){y=x.substr(0,z)}else{for(w=0;w<z;w++){y+=x.substr(w*v,1)}}return y}if(d.ali){n=(" "+d.d.cookie).split(";");for(o=0;o<n.length;o++){if(n[o].indexOf(" cna=")===0){k=n[o].substr(5,24);break}}}if(k===""){cu=(s.search.length>9)?s.search:((s.pathname.length>9)?s.pathname:s.href).substr(1);n=document.cookie.split(";");for(o=0;o<n.length;o++){if(n[o].split("=").length>1){m+=n[o].split("=")[1]}}if(m.length<16){m+="abcdef0123456789"}k=r(cu,8)+r(m,16)}for(o=1;o<=32;o++){t=q.floor(q.random()*16);if(k&&o<=k.length){u=k.charCodeAt(o-1);t=(t+u)%16}l+=t.toString(16)}if(!d.frm){h.setCookie(a.cookieKey,l)}var p=h.getCookie(a.cookieKey);if(p){return p}return l};j.et=function(){var s=new Date(),l=+s/1000|0,r=s.getTimezoneOffset()*60,p=l+r,m=p+(3600*8),q=m.toString().substr(2,8).split(""),o=[6,3,7,1,5,2,0,4],n=[];for(var k=0;k<o.length;k++){n.push(q[o[k]])}n[2]=9-n[2];n[4]=9-n[4];n[5]=9-n[5];return n.join("")};function i(l){var m=e.mix({},l);for(var k=a.para.length-1;k>-1;k--){m[a.para[k]]=l[a.para[k]]||""}return m}f.createFixed=function(m){var l=i(m);var k=d;k.cache=k.cache?k.cache:{pgid:c.pageid(),pid:l.pid,ref:k.getRef_url(),unid:l.unid,ak:l.appkey,rd:(l.rd==1)?l.rd:2,link_profit:l.link_profit=="off"?0:1,evid:l.evid,pp:[c.getCbhAndCbw(),c.getScreenInfo(),c.getBrowserInfo()].join("&")};k.cache.clicktime=j;if(m.debug){k.cache.ref=m.debug}};f.ready=function(k){if(g){return k()}var l=setTimeout(function(){d._maxwin(window);g=true;k()},50);d._maxwin();clearTimeout(l);g=true;k()};f.c=a;f.r=d});KSLITE.declare("tkapi-util",function(a,c){var b=KSLITE;var d=c;d.encode=function(j){return encodeURIComponent(j.toString())};d.decode=function(j){return decodeURIComponent(j.toString())};d.getAttr=function(k,j){return d.trim(k.getAttribute(j.toLowerCase(),2)||"")||""};d.setAttr=function(l,j,k){l.setAttribute(j.toLowerCase(),d.trim(k+""))};d.getCookie=function(l){var m=(" "+document.cookie).split(";"),j="";l=l?l:config.cookieKey;for(var k=0;k<m.length;k++){if(m[k].indexOf(" "+l+"=")===0){j=d.decode(m[k].split("=")[1]);break}}return j};d.css=function(k,j,l){if(l){k.style[j]=l;return}if(window.getComputedStyle){return window.getComputedStyle(k,null).getPropertyValue(j)}else{if(k.currentStyle){return k.currentStyle[j]}}};d.show=function(j){var k=d.getAttr(j,"_tk_old_display")||"";d.css(j,"display",k)};d.hide=function(j){if(!j){return}d.setAttr(j,"_tk_old_display",d.css(j,"display"));d.css(j,"display","none")};d.nodeList2Array=function(l){var m=[];for(var k=0,j=l.length;k<j;k++){m[k]=l[k]}return m};d.getElClientRect=function(j){var k=j.getBoundingClientRect();if(k.height===undefined||k.width===undefined){k=KSLITE.mix({},k);k.height=j.offsetHeight;k.width=j.offsetWidth}return k};d.each=function(n,m){if(n.length&&n.slice){for(var l=0,j=n.length;l<j;l++){m(n[l],l)}}else{for(var k in n){if(n.hasOwnProperty(k)){m(n[k],k)}}}};d.setCookie=function(j,k){j=arguments.length==1?config.cookieKey:j;document.cookie=j+"="+d.encode(k)+"; path=/"};d.trim=function(l){var j=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";for(var k=0;k<l.length;k++){if(j.indexOf(l.charAt(k))===-1){l=l.substring(k);break}}for(k=l.length-1;k>=0;k--){if(j.indexOf(l.charAt(k))===-1){l=l.substring(0,k+1);break}}return j.indexOf(l.charAt(0))===-1?l:""};(function(r,t){if(t.addEventListener){d.addEvent=function(w,v,x){w.addEventListener(v,x,false)};d.removeEvent=function(w,v,x){w.removeEventListener(v,x,false)}}else{if(t.attachEvent){d.addEvent=function(y,x,z){if(y[x+z]){return}var w,v;y["e"+x+z]=z;y[x+z]=function(){y["e"+x+z](window.event)};y.attachEvent("on"+x,y[x+z])};d.removeEvent=function(w,v,x){w.detachEvent("on"+v,w[v+x]);w[v+x]=null}}else{d.addEvent=function(w,v,x){w["on"+v]=x.call(w,r.event)};d.removeEvent=function(w,v,x){w["on"+v]=null}}}var m=t&&t.documentElement,n=m&&m.doScroll,k=n?"readystatechange":"DOMContentLoaded",s=false,j=[],q="complete",u=40,l=function(){s=true;var v=j.shift();while(v){try{v()}catch(w){KSLITE.log(w)}v=j.shift()}};function o(){try{m.doScroll("left");l()}catch(v){KSLITE.log(v);setTimeout(o,u)}}function p(){if(/complete/.test(t.readyState)){l()}else{setTimeout(p,u)}}if(n){o()}else{p()}d.domReady=function(v){if(s){v()}else{j.push(v)}}})(window,document);d.tagName=function(j){return j&&j.tagName?j.tagName.toLowerCase():null};d.cssSupports=(function(){var k=document.createElement("div"),j="Khtml Ms O Moz Webkit".split(" ");return function(m){if(m in k.style){return true}m=m.replace(/^[a-z]/,function(n){return n.toUpperCase()});var l=j.length;while(l--){if(j[l]+m in k.style){return true}}return false}})();d.findMatchEl=function(l){var j=d;try{if(l&&j.tagName(l)!="a"){for(var k=5;k>0;k--){if(l){l=l.parentNode;if(j.tagName(l)=="a"){break}}}if(j.tagName(l)!="a"){l=0}}return l}catch(m){KSLITE.log(m);return null}};var f=d.buildQuery=function(p,j,m){m=m||[];var l,n;if(j&&b.iA(j)){d.each(j,function(q,o){if(p[q]!==n){m.push(q+"="+d.encode(p[q]))}})}else{for(l in p){if(p.hasOwnProperty(l)){m.push(l+"="+d.encode(p[l]))}}}return m.join("&")};d.jsonpGet=function(k,o,w){var v=w.cbKey||"callback";var r=w.timeout||60000;var m=0,p=0,s=0;var l;var n;if(window.null_data){n=window.null_data}window.null_data=function(){if(n){n()}};var u=!!w.testing?jsonp_callback:"jsonp_callback_"+Math.random().toString().replace(".","");window[u]=function(y,x){if(p){return}clearTimeout(m);if(w.onCallback&&b.iF(w.onCallback)){w.onCallback(y,x)}t()};var j={success:function(){s=1}};var q=f(o,w.queryOrder,[v+"="+u]);if(k.indexOf("?")<0){l=b.getScript(k+"?"+q,j)}else{l=b.getScript(k+"&"+q,j)}function t(){try{l.parentNode.removeChild(l);delete window[u]}catch(x){window[u]=undefined}}m=setTimeout(function(){window[u](null,"Timeout");window[u]=function(){t()};p=1},r)};function h(k){if(!k||!k.tagName){return""}if(k.outerHTML){return k.outerHTML}var j,l=document.createElement("div");l.appendChild(k.cloneNode(true));j=el.innerHTML;el=null;return j}d.getAttrs=function(m){var l=m.attributes;var q=l.length-1;var k={data:{},biz:{}};if(q<15){var j;while(q+1){j=l[q].name;if(j.indexOf("data-")===0){k.data[j.substr(5)]=l[q].value}else{if(j.indexOf("biz-")===0){k.biz[j.substr(4)]=l[q].value}}q--}}else{var p=h(m);p=p.replace(m.innerHTML,"");var o=/(data|biz)-(.+?)=("|').*?\3/g;while(!!(q=o.exec(p))){k[q[1]][q[2].toLowerCase()]=l[q[1]+"-"+q[2]].value;if(q[5]===""){break}}}return k};var i=function(j,k,l){switch(j.toLowerCase()){case"beforebegin":l.parentNode.insertBefore(k,l);break;case"afterbegin":l.insertBefore(k,l.firstChild);break;case"beforeend":l.appendChild(k);break;case"afterend":if(l.nextSibling){l.parentNode.insertBefore(k,l.nextSibling)}else{l.parentNode.appendChild(k)}break}};var e=function(n,l,j){if(!l){l=document.body;j="beforeend"}else{if(!j){j="beforeend"}}if(l.insertAdjacentHTML){return l.insertAdjacentHTML(j,n)}var m=l.ownerDocument.createRange();m.setStartBefore(l);var k=m.createContextualFragment(n);i(j,k,l);return k};var g=0;d._iframe_document_domain=false;d.buildWriteableIframe=function(l){var j={};l.id=l.id||"writeable_iframe_"+g++;(function k(p){if(p>20){return false}var o='<iframe id="'+l.id+'" width="'+l.width+'" height="'+l.height+'" style="display:none"';var n=" src=\"javascript:document.write('<script>document.domain=\\'"+document.domain+"\\';<\/script>');\"";var m=' border="0" frameborder="0" scrolling="no" marginwidth="0" allowTransparency="true" marginheight="0"  style="border: 0pt none;"></iframe>';var q=o;if(d._iframe_document_domain){document.domain=document.domain;q+=n}q+=m;e(q,l.holder,l.position);setTimeout(function(){try{var w=document.getElementById(l.id);var u=w.contentWindow;var t=u.document;t.open("text/html","replace");if(q.indexOf("document.domain")>0){t.domain=document.domain}if(l.data&&b.iA(l.data)){var v=l.data;for(var s=0;s<v.length;s++){u[v[s].key]=v[s].value}}t.write(l.content);w.style.display="";if(l.complete){l.complete(w)}if(w.style.display=="none"){setTimeout(function(){w.style.display=""},200)}}catch(r){w.parentNode.removeChild(w);if(!p){p=1}else{p++}if(navigator.userAgent.toLowerCase().indexOf("msie")>-1){d._iframe_document_domain=true}k(p)}},20)})()}});KSLITE.declare("tkapi-bindclick",["tkapi-util","tkapi-config"],function(e,c){var b=e("tkapi-config"),d=e("tkapi-util");var g="http://g.click.taobao.com/q?";var f=function(m){var r,s;var i=d.getAttr(m,"href");var l=d.getAttr(m,"_orighref");if(!l&&!d.getAttr(m,"_tkworked")){d.setAttr(m,"_orighref",i);d.setAttr(m,"_tkworked","true");l=i}var j=d.getAttrs(m);var n=(l.match(/(?:http:)?\/\/([^\/]+)/i)||["",""])[1],p=!!n.match(/.+(\.taobao\.com|\.tmall\.com)$/ig),k=!!n.match(/.+(\.click\.taobao\.com)$/ig),o=!!(j.biz.itemid||j.biz.sellerid||j.biz.keyword||j.data.itemid||j.data.sellerid||j.data.keyword);if(!o){if(k){return undefined}if(!p){return undefined}if(!b.getConfig("link_profit")&&/item\.taobao|detail\.tmall/.test(n)){return undefined}}if(l){j.biz.url=l}var q=b.queryData(j,{v:"1.1"});if(q.hasOwnProperty("mobile")){q.mb=1;delete q.mobile}var h=g+d.buildQuery(q,b.c.queryOrder);return h};function a(k){var h=k,j=h.srcElement||h.target;j=d.findMatchEl(j);if(j){var i=f(j),l=j.innerText||"";if(d.trim(l)!=d.trim(j.href)){l=null}if(i){d.setAttr(j,"href",i);if(l){j.innerText=l}}}}c.Def=function(){d.addEvent(document,"mousedown",a)}});KSLITE.declare("tkapi-box-helper",["tkapi-util","tkapi-config","tkapi-monitor"],function(c,d){var e=c("tkapi-config"),i=c("tkapi-util");var h=c("tkapi-monitor");var f=0,g=document;g.createElement("tkbox");d.uniqId=function(){return ++f};d.checkParams=function(k){if(!k.data.type){return 0}return 1};d.isInView=function(l){var k=(g.documentElement.clientHeight||g.body.clientHeight)*2,m=i.getElClientRect(l);return m.top>0&&(k-m.top>m.height)};d.tplParser=function(k,l){i.each(l,function(m,n){k=k.replace(new RegExp("{"+n+"}","g"),m)});return k};d.styleTplParser=function(k,n){var l=KSLITE.mix({},n),m="";l=KSLITE.mix(l,k,false);i.each(l,function(o,p){if((o-0)==o){o=o+"px"}m=m+=p+":"+o+";"});return m};var b="http://g.click.taobao.com/display";d.fetchData=function(k,m){var l=e.queryData(k);l.wt=l.type;if(l.index){l.wi=l.index;delete l.index}if(l.tmplid){l.ti=l.tmplid;delete l.tmplid}if(l.tmpl){l.tl=l.tmpl;delete l.tmpl}if(l.style){l.st=l.style;delete l.style}i.jsonpGet(b,l,{cbKey:"cb",queryOrder:e.c.queryOrder,onCallback:function(o,n){if(n){o={code:501,msg:"\u7531\u4e8e\u7f51\u7edc\u95ee\u9898\uff0c\u6ca1\u6709\u6536\u5230\u8fd4\u56de\u6570\u636e\u3002"}}h.log({action:"receive",attrs:k,query:l,data:o});if(o.code){if(Math.floor(o.code/100)!=2){return}}m(o)}})};var j='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head> <title> GOLDEN TAOKE > ARBITER > ArbiterEntityView - Powered By Arbiter </title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/></head><body style="margin: 0"><script type="text/javascript" src="{template}"><\/script><script type="text/javascript" src="http://a.alimama.cn/tkapi/cc.js"><\/script></body></html>';var a='<iframe frameborder="0" style="border:none;width:{width}px;height:{height}px;overflow:hidden" scrolling="no" src="{src}" ></iframe>';d.render=function(o,l){if(o.pattern&&o.pattern=="tms"){var k=d.tplParser(a,{width:o.box.width,height:o.box.height,src:o.templet});l.innerHTML=k}else{var n={width:o.box.width,height:o.box.height,data:[{key:"UP_DATA",value:o.data},{key:"PG_DATA",value:e.c.cc(l)}],content:d.tplParser(j,{template:o.templet}),holder:l,position:"beforeend"};var m=i.buildWriteableIframe(n)}}});KSLITE.declare("tkapi-tipbox",["tkapi-util","tkapi-config","tkapi-box-helper","tkapi-monitor"],function(g,t){var d=g("tkapi-config"),a=g("tkapi-box-helper"),j=g("tkapi-util");var b=g("tkapi-monitor");var w="_tk_box_index",o="http://g.click.taobao.com/display",v=document;var f=j.cssSupports("transform");var h=navigator.userAgent.toLowerCase();var l=(h.indexOf("msie")!=-1?parseInt(h.split("msie")[1],10)==6:false);var k="http://img01.taobaocdn.com/tps/i1/T1WPlHXr4aXXXDSPLj-60-34.png";var x=7,n=12,q={box:{position:"absolute","text-indent":"0px",left:"0px",top:"0px","z-index":"1000;"},inner:{border:"1px solid #d9d9d9",margin:"{margin}",padding:"5px",background:"#FFF",height:"{height}px","box-shadow":"-1px 2px 4px #CCC",width:"{width}px"},arrowInner:{border:"solid 1px #CCC",height:"10px",background:"white","box-shadow":"#CCC -1px 3px 3px",position:"relative"},arrowOuter:{overflow:"hidden",height:"12px",width:"18px",position:"absolute",border:"none"},arrowImage:"background: url("+k+") no-repeat",arrowImage_ie6:"width:60px;height:34px;position:relative;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+k+"', sizingMethod='crop');"},c={topleft:function(u){return{box:a.styleTplParser(q.box,{top:u.top,left:u.left}),inner:a.styleTplParser(q.inner,KSLITE.mix({margin:"0 0 7px 0"},u)),arrowInner:a.styleTplParser(q.arrowInner,{"-webkit-transform":"matrix(1,-0.6,0,1,0,3)","-moz-transform":"matrix(1,-0.6,0,1,0px,3px)","-ms-transform":"matrix(1,-0.6,0,1,0,3)","-o-transform":"matrix(1,-0.6,0,1,0,3)",transform:"matrix(1,-0.6,0,1,0,3)",bottom:"10px",left:"3px"}),arrowOuter:a.styleTplParser(q.arrowOuter,{bottom:"-3px",left:"-3px"}),arrowImage:q.arrowImage+" -33px -22px;",arrowImage_ie6:q.arrowImage_ie6+"left:-33px;top:-22px;"}},topright:function(u){return{box:a.styleTplParser(q.box,{top:u.top,left:u.left}),inner:a.styleTplParser(q.inner,KSLITE.mix({margin:"0 0 7px 0"},u)),arrowInner:a.styleTplParser(q.arrowInner,{"-webkit-transform":"matrix(1,0.6,0,1,0,3)","-moz-transform":"matrix(1,0.6,0,1,0px,3px)","-ms-transform":"matrix(1,0.6,0,1,0,3)","-o-transform":"matrix(1,0.6,0,1,0,3)",transform:"matrix(1,0.6,0,1,0,3)",bottom:"10px",right:"3px"}),arrowOuter:a.styleTplParser(q.arrowOuter,{bottom:"-3px",right:"-3px"}),arrowImage:q.arrowImage+" -9px -22px;",arrowImage_ie6:q.arrowImage_ie6+"left:-9px;top:-22px;"}},bottomleft:function(u){return{box:a.styleTplParser(q.box,{top:u.top,left:u.left}),inner:a.styleTplParser(q.inner,KSLITE.mix({margin:"7px 0 0 0"},u)),arrowInner:a.styleTplParser(q.arrowInner,{"-webkit-transform":"matrix(1,0.6,0,1,0,3)","-moz-transform":"matrix(1,0.6,0,1,0px,3px)","-ms-transform":"matrix(1,0.6,0,1,0,3)","-o-transform":"matrix(1,0.6,0,1,0,3)",transform:"matrix(1,0.6,0,1,0,3)",top:"3px",left:"3px"}),arrowOuter:a.styleTplParser(q.arrowOuter,{top:"-3px",left:"-3px"}),arrowImage:q.arrowImage+" 3px 0px;",arrowImage_ie6:q.arrowImage_ie6+"left:3px;top:0px;"}},bottomright:function(u){return{box:a.styleTplParser(q.box,{top:u.top,left:u.left}),inner:a.styleTplParser(q.inner,KSLITE.mix({margin:"7px 0 0 0"},u)),arrowInner:a.styleTplParser(q.arrowInner,{"-webkit-transform":"matrix(1,-0.6,0,1,0,3)","-moz-transform":"matrix(1,-0.6,0,1,0px,3px)","-ms-transform":"matrix(1,-0.6,0,1,0,3)","-o-transform":"matrix(1,-0.6,0,1,0,3)",transform:"matrix(1,-0.6,0,1,0,3)",top:"3px",right:"3px"}),arrowOuter:a.styleTplParser(q.arrowOuter,{top:"-3px",right:"-3px"}),arrowImage:q.arrowImage+" -45px 0px;",arrowImage_ie6:q.arrowImage_ie6+"left:-45px;top:0px;"}}};function i(z){var A=a.uniqId(),y=v.createElement("tkbox"),u='                <div id="tk_box_inner_{uniqId}"></div>                <div id="tk_box_arrow_outer_{uniqId}">                    <div id="tk_box_arrow_inner_{uniqId}"></div>                </div>';y.id="tk_box_"+A;y.innerHTML=u.replace(/\{uniqId\}/g,A);v.body.appendChild(y);j.setAttr(y,w,A);return{box:y,holder:v.getElementById("tk_box_inner_"+A),uniqId:A}}var e=0;var p=[];t.onMouseover=function(y){t.clearHideTimer.call(y);var A=j.getAttr(y,w);if(A==="0"){return false}else{if(A&&e==A){return false}else{j.hide(document.getElementById("tk_box_"+e))}}var z=document.getElementById("tk_box_"+A);if(z){return s(z,y)}var u=j.getAttrs(y);j.setAttr(y,w,"0");if(!a.checkParams(u)){return false}b.log({tklink:y,action:"trigger",data:u});a.fetchData(u,function(C){var B=i(C);a.render(C,B.holder);j.setAttr(y,w,B.uniqId);B.box.size=C.box;B.box.uniqId=B.uniqId;s(B.box,y)})};function m(F,B){var z=v.documentElement,C=v.body,E=(z.clientHeight||C.clientHeight),G=(z.clientWidth||C.clientWidth),A=(z.scrollTop||C.scrollTop),K=j.getElClientRect(B),J=0,D=0,H="";var L=F.size.height,y=F.size.width,I=F.uniqId;if(E>K.top&&K.top>(x+L)){H="top";J=K.top+A-L-x-12}else{H="bottom";J=K.top+K.height+A}if(K.left+y<G){H+="left";D=K.left}else{H+="right";D=Math.min(K.left+K.width,G)-(y+12)-2}var u=c[H]({top:J,left:D,height:L,width:y});v.getElementById("tk_box_"+I).style.cssText=u.box;v.getElementById("tk_box_inner_"+I).style.cssText=u.inner;if(f){v.getElementById("tk_box_arrow_outer_"+I).style.cssText=u.arrowOuter;v.getElementById("tk_box_arrow_inner_"+I).style.cssText=u.arrowInner}else{if(l){v.getElementById("tk_box_arrow_outer_"+I).style.cssText=u.arrowOuter;v.getElementById("tk_box_arrow_inner_"+I).style.cssText=u.arrowImage_ie6}else{v.getElementById("tk_box_arrow_outer_"+I).style.cssText=u.arrowOuter+u.arrowImage}}}var r={};function s(y,u){m(y,u);j.addEvent(u,"mouseout",t.hide);j.addEvent(y,"mouseover",t.clearHideTimer);j.addEvent(y,"mouseout",t.hide);y.tklink_element=u}t.hide=function(y){var u=this;var z=j.getAttr(this,w);if(r[z]){window.clearTimeout(r[z])}r[z]=setTimeout(function(){var B=u;e=0;var A=document.getElementById("tk_box_"+z);j.hide(A);if(u==A&&A.tklink_element){j.removeEvent(A.tklink_element,"mouseout",t.hide)}else{j.removeEvent(B,"mouseout",t.hide)}j.removeEvent(A,"mouseout",t.hide);j.removeEvent(A,"mouseover",t.clearHideTimer)},250)};t.clearHideTimer=function(){var u=j.getAttr(this,w);window.clearTimeout(r[u])}});KSLITE.declare("tkapi-replacebox",["tkapi-util","tkapi-config","tkapi-box-helper","tkapi-monitor"],function(c,d){var f=c("tkapi-config"),b=c("tkapi-box-helper"),i=c("tkapi-util");var h=c("tkapi-monitor");var e="_tk_rb_index",g=document,a="http://g.click.taobao.com/display";d.scrollHandle=function(){var j=[];if(document.querySelectorAll){j=i.nodeList2Array(document.querySelectorAll('a[data-style="2"]'))}else{var k=i.nodeList2Array(document.getElementsByTagName("a"));i.each(k,function(l,m){if(i.getAttr(l,"data-style")==2){j.push(l)}})}i.each(j,function(l,m){if(i.getAttr(l,e)){return false}var n=i.getAttr(l,"data-notlazy");if(n||b.isInView(l)){d.show(l)}})};d.show=function(k){if(i.getAttr(k,e)){return}var j=i.getAttrs(k);i.setAttr(k,e,"0");if(!b.checkParams(j)){return false}h.log({tklink:k,action:"trigger",data:j});b.fetchData(j,function(m){var l=g.createElement("tkbox"),n=b.uniqId();l.id="tk_box_"+n;l.style.cssText=b.styleTplParser({border:"1px solid #d9d9d9","text-indent":"0px",display:"block",width:m.box.width,height:m.box.height});if(k.getAttribute("data-border")=="0"){l.style.border="none"}k.parentNode.insertBefore(l,k);i.hide(k);i.setAttr(k,e,n);b.render(m,l)})}});KSLITE.declare("tkapi-boot",["tkapi-util","tkapi-config","tkapi-tipbox","tkapi-replacebox"],function(d,b){var a=d("tkapi-config"),f=d("tkapi-tipbox"),e=d("tkapi-replacebox"),c=d("tkapi-util");b.Def=function(){var h;var g;var i=function(){var k=g;if(k.tagName.toLowerCase()!=="a"){return}if(c.getAttr(k,"_hover-ignore")){return}if(c.getAttr(k,"data-style")==1){f.onMouseover(k)}else{c.setAttr(k,"_hover-ignore","1")}};c.addEvent(document,"mouseover",function(k){h&&clearTimeout(h);h=0;g=k.target||k.srcElement;h=setTimeout(i,100)});var j;c.addEvent(window,"scroll",function(){if(j){window.clearTimeout(j)}j=setTimeout(e.scrollHandle,80)});c.domReady(e.scrollHandle)}});KSLITE.declare("tkapi-load",["tkapi-util","tkapi-config"],function(d,b){var a=d("tkapi-config"),e=a.r,c=d("tkapi-util");b.Def=function(){var f=[];function g(i,h){if(!!h){f.push(i+(i?"=":"")+h)}}g("rf",c.encode(e.cache.ref));g("pid",e.cache.pid);g("pgid",e.cache.pgid);g("ak",e.cache.ak);g("",e.cache.pp);c.jsonpGet(a.c.alimama+"load?"+f.join("&"),{},{cbKey:"cb",onCallback:function(i,h){if(h){i={code:-1}}if(String(i.code).length!=8){return}e.cache.et=i.code}});(new Image()).src="http://acookie.taobao.com/1.gif"}});KSLITE.declare("tkapi-plugin",["tkapi-util","tkapi-config","tkapi-replacebox"],function(c,k){var j=KSLITE;var o=c("tkapi-config");var n=c("tkapi-util");var f=c("tkapi-replacebox");var a;var b={};b.tklink=function(u,t,s){if(!j.iPO(t)){return null}var r,q=document.createElement("a");t.tc=this.getPluginName();q.href=t.href;q.appendChild(document.createTextNode(u));for(r in t){if(t.hasOwnProperty(r)&&r!="href"){q.setAttribute("data-"+r,t[r])}}if(s){if(!a){a=document.createElement("div")}a.innerHTML="";a.appendChild(q);return a.innerHTML}else{return q}};b.showReplaceBox=f.show;var p;b.getElementsFor=function(s){var r={};var u=[];p=p||document.getElementsByTagName("*");var q;for(var t=0;t<p.length;t++){q=p[t].getAttribute("data-plugin");if(q){if(q.indexOf(",")){q=q.split(",")[0]}if(!r[q]){r[q]=[]}r[q].push(p[t])}}return r[s]||[]};b.util=n;var m={};var e=function(r){if(m[r]){return m[r]}var q=function(){};q.prototype=b;var s=new q();s.getPluginName=function(){return r};m[r]=s;return s};var i=undefined,h=-1,d=0;var g=k.taskQueue={queue:[],waiting:0,onLoad:function(){var q=g;var r=-1;var t=q.queue[q.waiting];var s=function(v){if(r===0){return}q.waiting++;clearTimeout(r);setTimeout(q.onLoad)};if(t){q.queue[q.waiting]=d;if(t===h||!(t.Def&&j.iF(t.Def))){return s()}r=setTimeout(function(){s();r=0},2000);if(t.Def.length){try{t.Def(s)}catch(u){}}else{try{t.Def()}catch(u){}s()}}},attachPlugin:function(q,u){var s=l(q);var t=j.Env.mods[u];var r=j.require(t.name);t.fn({require:s},r,j._ns(t.name));t.status=4;return r},loadByName:function(r,q){var s=this;var t="tkapi-plugin-"+q;j._lM({name:t},function(){var u=s.attachPlugin(q,t);r(u)})},loadByDeclare:function(q,t){var r=this;var s="tkapi-plugin-"+t.name;j.declare(s,[],t.declare);var u=r.attachPlugin(t.name,s);q(u);console.log("new declare",s)},loadByUrl:function(q,t){var r=this;var s="tkapi-plugin-"+t.name;j.getScript(t.url,function(){var u=r.attachPlugin(t.name,s);q(u)});console.log("new Url",t)},addTask:function(u,q){var r=this;var t=0;var s=r.queue.push(i)-1;var v=function(w){clearTimeout(t);r.queue[s]=(w===undefined)?h:w;r.onLoad()};t=setTimeout(v,10000);if(q){q(v,u.name)}else{if(u.declare){r.loadByDeclare(v,u)}else{if(u.url){r.loadByUrl(v,u)}else{if(u.name){r.loadByName(v,u.name)}}}}}};var l=k.requireFor=function(q){return function(r){if(r=="tkapi-plugin-api"){return e(q)}else{return j.require(r)}}};k.Def=function(q){g.queue=[];g.waiting=0;if(!q){return}if(!j.iA(q)||!q.length){return}var s,t;for(var r=0;r<q.length;r++){s=q[r];g.addTask(s)}}});